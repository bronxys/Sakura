'use strict';

var Encoder = require('../../').Encoder;
var Net = require('net');
var ProtoBuf = require('protocol-buffers/require');

var client = Net.connect(8001, 'localhost');

var messages = ProtoBuf(__dirname + '/message.proto');
var encoder = new Encoder(messages.Message);
encoder.pipe(client);

setInterval(function() {
  encoder.write({
    name: 'Hello',
    value: 'world',
    timestamp: Date.now()
  });
}, 1000);
